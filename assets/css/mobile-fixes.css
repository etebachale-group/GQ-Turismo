/**
 * Correcciones de diseño móvil global
 * Soluciona problemas de desbordamiento horizontal y mejora UX en dispositivos móviles
 */

/* ========================================
   CORRECCIONES BÁSICAS
======================================== */

/* Prevenir desbordamiento horizontal */
html {
    overflow-x: hidden;
    max-width: 100vw;
}

body {
    overflow-x: hidden;
    max-width: 100vw;
    position: relative;
}

/* Contenedores que causan desbordamiento */
* {
    max-width: 100%;
}

img, video, iframe, embed, object {
    max-width: 100%;
    height: auto;
}

/* ========================================
   TABLAS RESPONSIVE
======================================== */

@media (max-width: 992px) {
    /* Contenedor de tabla con scroll horizontal */
    .table-responsive {
        display: block;
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    /* Envolver todas las tablas que no estén en table-responsive */
    table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
    }
    
    /* Estilo para tablas grandes */
    .table {
        min-width: 600px;
    }
}

/* ========================================
   CARDS Y CONTENEDORES
======================================== */

@media (max-width: 992px) {
    .card {
        margin-bottom: 1rem;
        overflow: hidden;
    }
    
    .card-body {
        padding: 1rem;
    }
    
    .card-title {
        font-size: 1.1rem;
    }
    
    /* Contenedores con padding */
    .container, .container-fluid {
        padding-left: 15px;
        padding-right: 15px;
    }
}

/* ========================================
   FORMULARIOS
======================================== */

@media (max-width: 992px) {
    .form-control, .form-select {
        font-size: 16px; /* Evita zoom en iOS */
    }
    
    .input-group {
        flex-wrap: nowrap;
        overflow: hidden;
    }
    
    /* Botones en formularios */
    .btn-group {
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    
    .btn {
        white-space: normal;
        word-wrap: break-word;
    }
}

/* ========================================
   NAVEGACIÓN Y SIDEBAR
======================================== */

@media (max-width: 992px) {
    /* Navbar */
    .navbar {
        padding: 0.5rem 1rem;
    }
    
    .navbar-brand {
        font-size: 1.1rem;
    }
    
    /* Sidebar en móviles */
    .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 280px;
        max-width: 80vw;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        z-index: 9999;
        overflow-y: auto;
        background: white;
    }
    
    .sidebar.show {
        transform: translateX(0);
    }
    
    /* Contenido principal en móviles */
    .main-content {
        margin-left: 0 !important;
        width: 100% !important;
        padding: 1rem;
    }
}

/* ========================================
   GRIDS Y LAYOUTS
======================================== */

@media (max-width: 992px) {
    /* Forzar columnas a ser stack */
    .row > [class*='col-'] {
        padding-left: 10px;
        padding-right: 10px;
    }
    
    /* Grid de media */
    .media-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    /* Flexbox */
    .d-flex {
        flex-wrap: wrap;
    }
    
    /* Ocultar elementos innecesarios en móvil */
    .hide-mobile {
        display: none !important;
    }
}

@media (max-width: 576px) {
    .row > [class*='col-'] {
        margin-bottom: 1rem;
    }
}

/* ========================================
   MODALES
======================================== */

@media (max-width: 992px) {
    .modal-dialog {
        margin: 0.5rem;
        max-width: calc(100% - 1rem);
    }
    
    .modal-content {
        border-radius: 0.5rem;
    }
    
    .modal-body {
        padding: 1rem;
    }
    
    .modal-header {
        padding: 1rem;
    }
    
    .modal-footer {
        padding: 0.75rem;
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    
    .modal-footer .btn {
        flex: 1;
        min-width: 120px;
    }
}

/* ========================================
   BOTONES Y ACCIONES
======================================== */

@media (max-width: 992px) {
    /* Botones más grandes para touch */
    .btn {
        min-height: 44px; /* Tamaño recomendado para touch */
        padding: 0.5rem 1rem;
    }
    
    .btn-sm {
        min-height: 36px;
        padding: 0.375rem 0.75rem;
    }
    
    /* Iconos en botones */
    .btn i {
        font-size: 1.1em;
    }
    
    /* Grupos de botones */
    .btn-toolbar {
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    
    /* Botones flotantes */
    .btn-float {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
        border-radius: 50%;
        width: 56px;
        height: 56px;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
}

/* ========================================
   TEXTO Y TIPOGRAFÍA
======================================== */

@media (max-width: 992px) {
    h1, .h1 {
        font-size: 1.75rem;
    }
    
    h2, .h2 {
        font-size: 1.5rem;
    }
    
    h3, .h3 {
        font-size: 1.25rem;
    }
    
    h4, .h4 {
        font-size: 1.1rem;
    }
    
    /* Texto pequeño legible */
    small, .small {
        font-size: 0.875rem;
    }
    
    /* Prevenir overflow de texto */
    p, li, span {
        word-wrap: break-word;
        overflow-wrap: break-word;
        hyphens: auto;
    }
}

/* ========================================
   BADGES Y ETIQUETAS
======================================== */

@media (max-width: 992px) {
    .badge {
        font-size: 0.75rem;
        padding: 0.35em 0.65em;
    }
    
    .status-badge {
        display: inline-block;
        max-width: 100%;
        white-space: normal;
    }
}

/* ========================================
   ALERTAS Y NOTIFICACIONES
======================================== */

@media (max-width: 992px) {
    .alert {
        margin-bottom: 1rem;
        font-size: 0.9rem;
    }
    
    .toast {
        max-width: calc(100vw - 2rem);
    }
}

/* ========================================
   PAGINACIÓN
======================================== */

@media (max-width: 992px) {
    .pagination {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .page-link {
        min-width: 44px;
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
}

/* ========================================
   BREADCRUMBS
======================================== */

@media (max-width: 992px) {
    .breadcrumb {
        font-size: 0.875rem;
        flex-wrap: wrap;
        padding: 0.5rem 0;
    }
    
    .breadcrumb-item {
        max-width: 150px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
}

/* ========================================
   IMÁGENES Y MEDIA
======================================== */

@media (max-width: 992px) {
    .img-thumbnail {
        padding: 0.25rem;
    }
    
    .media-image {
        max-height: 200px;
        object-fit: cover;
    }
    
    /* Carruseles */
    .carousel-item img {
        height: 250px;
        object-fit: cover;
    }
}

/* ========================================
   LISTAS
======================================== */

@media (max-width: 992px) {
    .list-group-item {
        padding: 0.75rem 1rem;
        font-size: 0.9rem;
    }
    
    /* Listas horizontales a verticales */
    .list-group-horizontal {
        flex-direction: column !important;
    }
}

/* ========================================
   DROPDOWNS
======================================== */

@media (max-width: 992px) {
    .dropdown-menu {
        max-width: calc(100vw - 2rem);
        font-size: 0.9rem;
    }
    
    .dropdown-item {
        padding: 0.75rem 1rem;
    }
}

/* ========================================
   TABS Y NAVEGACIÓN DE CONTENIDO
======================================== */

@media (max-width: 992px) {
    .nav-tabs {
        flex-wrap: nowrap;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .nav-tabs .nav-link {
        white-space: nowrap;
        padding: 0.5rem 1rem;
    }
}

/* ========================================
   ESPACIADO VERTICAL
======================================== */

@media (max-width: 992px) {
    .section-spacing {
        padding-top: 2rem;
        padding-bottom: 2rem;
    }
    
    /* Reducir márgenes */
    .my-5 {
        margin-top: 2rem !important;
        margin-bottom: 2rem !important;
    }
    
    .py-5 {
        padding-top: 2rem !important;
        padding-bottom: 2rem !important;
    }
}

/* ========================================
   FIX ESPECÍFICO PARA MANAGE_AGENCIAS
======================================== */

@media (max-width: 992px) {
    /* Contenedor principal */
    .admin-container {
        max-width: 100vw;
        overflow-x: hidden;
    }
    
    /* Tablas en manage_agencias */
    .agencias-table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .agencias-table {
        min-width: 700px;
    }
    
    /* Cards de agencias */
    .agencia-card {
        margin-bottom: 1rem;
    }
    
    .agencia-card .card-body {
        padding: 1rem;
    }
    
    /* Imágenes de agencias */
    .agencia-img {
        max-width: 100%;
        height: auto;
    }
}

/* ========================================
   UTILIDADES
======================================== */

/* Ocultar en móvil */
@media (max-width: 992px) {
    .d-mobile-none {
        display: none !important;
    }
}

/* Mostrar solo en móvil */
@media (min-width: 993px) {
    .d-mobile-only {
        display: none !important;
    }
}

/* Full width en móvil */
@media (max-width: 992px) {
    .mobile-full-width {
        width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
}

/* Padding reducido en móvil */
@media (max-width: 992px) {
    .mobile-p-sm {
        padding: 0.5rem !important;
    }
}

/* ========================================
   ANIMACIONES SUAVES
======================================== */

@media (prefers-reduced-motion: no-preference) {
    .sidebar,
    .sidebar-overlay,
    .modal,
    .dropdown-menu {
        transition: all 0.3s ease;
    }
}

/* ========================================
   SCROLL SUAVE
======================================== */

html {
    scroll-behavior: smooth;
}

/* Scroll en contenedores */
.scroll-container {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
}

/* ========================================
   ACCESIBILIDAD TOUCH
======================================== */

@media (max-width: 992px) {
    /* Áreas clickeables más grandes */
    a, button, input[type="submit"], input[type="button"] {
        min-height: 44px;
        min-width: 44px;
    }
    
    /* Mejor contraste */
    .text-muted {
        color: #6c757d !important;
    }
}
